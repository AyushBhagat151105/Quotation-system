import{r as b,l as w,j as e}from"./index-CjKGLORb.js";import{B as r}from"./button-B-x8lPpO.js";import{u as g,t as N,a as f,I as i}from"./zod-Dl1H6Aq1.js";import{q as j}from"./quotation-B4L4haJ9.js";import{C as y}from"./api-CmR8jQ8C.js";import{L as v}from"./loader-circle-8jTwx9-1.js";function C(){const[o,l]=b.useState(!1),m=w(),c=g({resolver:N(y),defaultValues:{clientName:"",clientEmail:"",validityDate:"",items:[{itemName:"",description:"",quantity:1,unitPrice:"0",tax:"0"}]}}),{register:a,handleSubmit:d,control:h}=c,{fields:n,append:p,remove:u}=f({control:h,name:"items"}),x=async s=>{try{l(!0);const t=await j.create(s);if(!t)return;m({to:"/dashboard/quotations/$id",params:{id:t.id}})}finally{l(!1)}};return e.jsxs("form",{onSubmit:d(x),className:"space-y-6 bg-white/5 backdrop-blur-xl p-6 rounded-xl border border-white/10 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold bg-linear-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:"Create New Quotation"}),e.jsx(i,{placeholder:"Client Name",...a("clientName"),className:"bg-white/10 border-white/20 text-white"}),e.jsx(i,{placeholder:"Client Email",...a("clientEmail"),className:"bg-white/10 border-white/20 text-white"}),e.jsx(i,{type:"date",...a("validityDate"),className:"bg-white/10 border-white/20 text-white"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white/90",children:"Quotation Items"}),n.map((s,t)=>e.jsxs("div",{className:"p-4 border border-white/10 rounded-lg bg-white/5 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(i,{placeholder:"Item Name",...a(`items.${t}.itemName`),className:"bg-white/10 border-white/20 text-white"}),e.jsx(i,{placeholder:"Quantity",type:"number",...a(`items.${t}.quantity`,{valueAsNumber:!0}),className:"bg-white/10 border-white/20 text-white"})]}),e.jsx(i,{placeholder:"Description (optional)",...a(`items.${t}.description`),className:"bg-white/10 border-white/20 text-white"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(i,{placeholder:"Unit Price (e.g., 2000)",...a(`items.${t}.unitPrice`),className:"bg-white/10 border-white/20 text-white"}),e.jsx(i,{placeholder:"Tax (optional)",...a(`items.${t}.tax`),className:"bg-white/10 border-white/20 text-white"})]}),n.length>1&&e.jsx(r,{type:"button",variant:"destructive",onClick:()=>u(t),className:"w-full bg-red-500/40 hover:bg-red-500/60",children:"Remove Item"})]},s.id)),e.jsx(r,{type:"button",onClick:()=>p({itemName:"",description:"",quantity:1,unitPrice:"0",tax:"0"}),className:"w-full bg-linear-to-r from-purple-500 to-pink-600",children:"+ Add Item"})]}),e.jsx(r,{className:"w-full py-3 text-lg bg-linear-to-r from-pink-500 to-purple-600 hover:opacity-90",disabled:o,children:o?e.jsx(v,{className:"animate-spin w-5 h-5 text-white"}):"Create Quotation"})]})}function S(){return e.jsxs("div",{className:"p-8 text-white",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Create Quotation"}),e.jsx(C,{})]})}export{S as component};
